!function(i,j,u){"use strict";function E(){var f=[],Z=[];return function(){return 0===arguments.length?Z.join("")+c.apply(String,f):(f.length+arguments.length>1024&&(Z.push(c.apply(String,f)),f.length=0),Array.prototype.push.apply(f,arguments),void 0)}}function k(D,v,j,u,U){var r,e,V=8*U-u-1,b=(1<<V)-1,l=b>>1,O=-7,W=j?U-1:0,H=j?-1:1,f=D[v+W];for(W+=H,r=f&(1<<-O)-1,f>>=-O,O+=V;O>0;r=256*r+D[v+W],W+=H,O-=8);for(e=r&(1<<-O)-1,r>>=-O,O+=u;O>0;e=256*e+D[v+W],W+=H,O-=8);if(0===r)r=1-l;else{if(r===b)return e?0/0:1/0*(f?-1:1);e+=Math.pow(2,u),r-=l}return(f?-1:1)*e*Math.pow(2,r-u)}var H="ht",r=i[H],y=null,X=Math,f=X.abs,n=X.max,K=Number.MAX_VALUE,T=r.Default,Y=T.getInternal(),g=T.clone,m=Y.vec3TransformMat4,e=[0,0],I=Y.appendArray,W=function(){function d(r,M,i,P){if(r){var y=r[P];if(y){i.ignoreColor||(M.color=y.kd),!i.ignoreTransparent&&y.d>0&&y.d<1&&(M.transparent=!0,M.opacity=y.d);var d;if(!i.ignoreImage&&(d=y.map_kd)){d=d.split(" ");for(var C=-1,V=0;V<d.length;V++)"-o"===d[V]?(M.uvOffset=[parseFloat(d[V+1]),parseFloat(d[V+2])],V+=3,C=V):"-s"===d[V]&&(M.uvScale=[parseFloat(d[V+1]),parseFloat(d[V+2])],V+=3,C=V);M.image=(i.prefix||"")+d.splice(C+1).join(" ")}}}}var v=/v( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,V=/vt( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,q=/vn( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,O=/^[og]\s*(.+)?/,i=function(Z,Y){return Y=parseInt(Y),Y>=0?Z[Y-1]:Z[Y+Z.length]},M=function(P,h,y,D,A){if(P.lvs){var w=i(h,D),d=i(h,A),$=y.matrix,n=P.lvs;$?(I(n,m(g(w),$)),I(n,m(g(d),$))):(I(n,w),I(n,d))}},G=function(Z,O,Q,Y,c,t){if(Z.vs){var H=i(O,Y),K=i(O,c),z=i(O,t),p=Q.matrix,h=Z.vs;if(Q.flipFace){var u=K;K=z,z=u}p?(I(h,m(g(H),p)),I(h,m(g(K),p)),I(h,m(g(z),p))):(I(h,H),I(h,K),I(h,z))}},c=function(F,m,Z,c,U,N){if(F.vs){var a=Z.flipY,P=c===u?e:i(m,c),X=U===u?e:i(m,U),L=N===u?e:i(m,N);if(Z.flipFace){var v=X;X=L,L=v}F.uv.push(P[0],a?1-P[1]:P[1],X[0],a?1-X[1]:X[1],L[0],a?1-L[1]:L[1])}},H=function(P,S,n,o,_,y){if(P.vs){var B=i(S,o),G=i(S,_),U=i(S,y),l=n.normalMatrix,p=P.ns;if(n.flipFace){var O=G;G=U,U=O}l?(I(p,m(g(B),l)),I(p,m(g(G),l)),I(p,m(g(U),l))):(I(p,B),I(p,G),I(p,U))}},a=function(L,$,s,e){for(var w=e.length-1,p=0;w>p;++p)M(L,$,s,e[p],e[p+1]);M(L,$,s,e[w],e[0])},P=function(J,o,b,R,V,Q,l,z){var P=R&&R.length&&z;Q[3]===u?(G(J,o,V,Q[0],Q[1],Q[2]),l?c(J,b,V,l[0],l[1],l[2]):J.uv&&J.uv.length&&c(J,b,V),P&&H(J,R,V,z[0],z[1],z[2])):(G(J,o,V,Q[0],Q[1],Q[3]),G(J,o,V,Q[1],Q[2],Q[3]),l?(c(J,b,V,l[0],l[1],l[3]),c(J,b,V,l[1],l[2],l[3])):J.uv&&J.uv.length&&(c(J,b,V),c(J,b,V)),P&&(H(J,R,V,z[0],z[1],z[3]),H(J,R,V,z[1],z[2],z[3])))},B=function(T,q,L,P){var c,I,v,y,b,V,R,$,a=K,h=K,i=K,J=-K,U=-K,x=-K;for(c in T)for(V=T[c].vs,$=V.length,I=0;$>I;I+=3)v=V[I+0],y=V[I+1],b=V[I+2],a>v&&(a=v),h>y&&(h=y),i>b&&(i=b),v>J&&(J=v),y>U&&(U=y),b>x&&(x=b);var X;if(L){var C=a+(J-a)/2,s=h+(U-h)/2,d=i+(x-i)/2;for(c in T){for(V=T[c].vs,$=V.length,I=0;$>I;I+=3)V[I+0]-=C,V[I+1]-=s,V[I+2]-=d;if(R=T[c].lvs)for($=R.length,I=0;$>I;I+=3)R[I+0]-=C,R[I+1]-=s,R[I+2]-=d}X=[C,s,d]}var g,S,F;L?(g=J-a,S=U-h,F=x-i):(g=2*n(f(a),f(J)),S=2*n(f(h),f(U)),F=2*n(f(i),f(x))),0===g&&(g=Math.min(S,F)/1e3||.001),0===S&&(S=Math.min(g,F)/1e3||.001),0===F&&(F=Math.min(g,S)/1e3||.001),P.rawS3=[g,S,F];for(c in T){if(V=T[c].vs,R=T[c].lvs,q){for($=V.length,I=0;$>I;I+=3)g&&(V[I+0]/=g),S&&(V[I+1]/=S),F&&(V[I+2]/=F);if(R)for($=R.length,I=0;$>I;I+=3)g&&(R[I+0]/=g),S&&(R[I+1]/=S),F&&(R[I+2]/=F);var O=T[c].ns;if(O){$=O.length;var M=new r.Math.Vector3;for(I=0;$>I;I+=3)M.set(O[I+0]*g,O[I+1]*S,O[I+2]*F).normalize(),O[I+0]=M.x,O[I+1]=M.y,O[I+2]=M.z}}T[c].rawS3=P.rawS3,X&&(T[c].center=X)}};return function(A,X,b){if(!A)return y;(Y.isString(X)||X instanceof ArrayBuffer)&&(X=Q(X)),b||(b={}),b.flipY==y&&(b.flipY=!0),(b.s3||b.r3||b.t3||b.mat)&&(b.matrix=Y.createWorldMatrix(b.mat,b.s3,b.r3,b.rotationMode,b.t3));var I,m,G,S,L=r.Style["wf.loadQuadWireframe"],i=[],Z=[],M=b.ignoreNormal?y:[],n=b.reverseFlipMtls,p={vs:[],uv:[],ns:M?[]:y},t={htdefault:p},s=new w(A),U="",$="";for(M&&b.matrix&&(b.normalMatrix=Y.createNormalMatrix(b.matrix));null!=(m=s.stepNext());)if(m=m.trim(),0!==m.length&&"#"!==m.charAt(0))if(m.indexOf("\\")!==m.length-1){if(U&&(m=U+m,U=""),m.indexOf("#QNAN0")>=0&&(m=m.replace(/#QNAN0/gi,"0")),G=v.exec(m))i.push([parseFloat(G[1]),parseFloat(G[2]),parseFloat(G[3])]);else if(G=V.exec(m))Z.push([parseFloat(G[1]),parseFloat(G[2])]);else if(M&&(G=q.exec(m)))b.flipFace?M.push([parseFloat(-G[1]),parseFloat(-G[2]),parseFloat(-G[3])]):M.push([parseFloat(G[1]),parseFloat(G[2]),parseFloat(G[3])]);else if("f"===m[0]){var x=m.split(/\s+/);if(x.length<4)continue;var h,I,z,j=[],H=[],e=[];for(I=1,z=x.length;z>I;I++)h=x[I].split("/"),j.push(parseInt(h[0],10)),h.length>1&&h[1].length>0&&e.push(parseInt(h[1],10)),h.length>2&&h[2].length>0&&H.push(parseInt(h[2],10));for(I=0,z=j.length-2;z>I;I++)P(p,i,Z,M,b,[j[0],j[I+1],j[I+2]],e.length?[e[0],e[I+1],e[I+2]]:y,H.length?[H[0],H[I+1],H[I+2]]:y);L&&a(p,i,b,j)}else if(b.part&&null!==(G=O.exec(m)))$=(" "+G[0].substr(1).trim()).substr(1);else if(/^usemtl /.test(m)){var c=m.substring(7).trim();c.split(" ").forEach(function(D){var W=b.part?$+"_"+D:D;(p=t[W])||(p=t[W]={name:W,vs:[],uv:[],ns:M?[]:y,lvs:L?[]:y},b.ignoreMtls&&b.ignoreMtls.indexOf(D)>=0&&delete p.vs,(b.reverseFlip||"*"===n||n&&n.indexOf(D)>=0)&&(p.reverseFlip=!0),d(X,p,b,D))})}}else U+=m.substring(0,m.length-1);var J=[];for(var D in t){var u=t[D].vs;if(u&&0!==u.length){var o=t[D].uv;if(o)for(var K=2*u.length/3-o.length;K-->0;)o.push(0)}else J.push(D)}J.forEach(function(P){delete t[P]}),B(t,b.cube,b.center,b);var E=b.shape3d;if(E){var l=[];for(var S in t){var p=t[S];l.rawS3=p.rawS3,p.center&&(l.center=p.center),l.push(p)}T.setShape3dModel(E,l)}return t}}(),Q=function(M){var a={};if(M)for(var R,T,x,m,h,u,Z=new w(M),v=/\s+/;null!=(T=Z.stepNext());)T=T.trim(),0!==T.length&&"#"!==T.charAt(0)&&(x=T.indexOf(" "),m=(x?T.substring(0,x):T).toLowerCase(),h=(x?T.substring(x+1):"").trim(),"newmtl"===m?a[h]=R={name:h}:R&&("ka"===m||"kd"===m||"ks"===m?(u=h.split(v,3),R[m]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2]),1]):R[m]="ns"===m||"d"===m?parseFloat(h):h));return a},w=function(j){var G=this;if(j instanceof ArrayBuffer){G.isBuffer=!0;var L=0,k=new Uint8Array(j),S=k.length,d=k.length;G.stepNext=function(){for(var p,X,B=L;S>L;)if(p=k[L],X=p>>4,12===X||13==X)L+=2;else if(14===X)L+=3;else if(L++,10===p)return String.fromCharCode.apply(null,k.subarray(B,L));return L>B?String.fromCharCode.apply(null,k.subarray(B,L)):null}}else{G.isBuffer=!1;var B=j.split("\n"),H=0,d=B.length;G.stepNext=function(){return d>H?B[H++]:null}}};w.prototype={},w.prototype.constructor=w,Y.addMethod(T,{loadObj:function(u,_,s){s=s||{};var b=!1;/(MSIE |Trident\/|Edge\/)/.test(i.navigator.userAgent)&&(b=!0);var G=function(D){var o,t=s.finishFunc,S=s.shape3d,n=D?W(D[0],D[1],s):null;if(n){if(S)o=T.getShape3dModel(S);else{o=[];for(var O in n){var k=n[O];o.rawS3=k.rawS3,o.push(k)}}t&&t(n,o,o.rawS3)}else t&&t(null)};if(b){s.responseType="arraybuffer";var Y=function(V){T.xhrLoad(u,function(C){G([C,V])},s)};_?T.xhrLoad(_,function(L){Y(L)},s):Y()}else T.xhrLoad(_?[u,_]:[u],G,s)},parseObj:function(I,u,l){return W(I,u,l)}});var p=r.ByteBuffer=function(F,Z,n){if("undefined"==typeof F&&(F=p.DEFAULT_CAPACITY),"undefined"==typeof Z&&(Z=p.DEFAULT_ENDIAN),"undefined"==typeof n&&(n=p.DEFAULT_NOASSERT),!n){if(F=0|F,0>F)throw RangeError("Illegal capacity");Z=!!Z,n=!!n}this.buffer=0===F?L:new ArrayBuffer(F),this.view=0===F?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=F,this.littleEndian=Z,this.noAssert=n},L=new ArrayBuffer(0);p.LITTLE_ENDIAN=!0,p.BIG_ENDIAN=!1,p.DEFAULT_CAPACITY=16,p.DEFAULT_ENDIAN=p.BIG_ENDIAN,p.DEFAULT_NOASSERT=!1,p.METRICS_BYTES="b";var c=String.fromCharCode,o=p.prototype;o.readUint8=function(p){var B="undefined"==typeof p;if(B&&(p=this.offset),!this.noAssert){if("number"!=typeof p||0!==p%1)throw TypeError("Illegal offset: "+p+" (not an integer)");if(p>>>=0,0>p||p+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+p+" (+"+1+") <= "+this.buffer.byteLength)}var v=this.view[p];return B&&(this.offset+=1),v},o.readUint16=function(y){var Z="undefined"==typeof y;if(Z&&(y=this.offset),!this.noAssert){if("number"!=typeof y||0!==y%1)throw TypeError("Illegal offset: "+y+" (not an integer)");if(y>>>=0,0>y||y+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+y+" (+"+2+") <= "+this.buffer.byteLength)}var P=0;return this.littleEndian?(P=this.view[y],P|=this.view[y+1]<<8):(P=this.view[y]<<8,P|=this.view[y+1]),Z&&(this.offset+=2),P},o.readUint24=function(H){var s="undefined"==typeof H;if(s&&(H=this.offset),!this.noAssert){if("number"!=typeof H||0!==H%1)throw TypeError("Illegal offset: "+H+" (not an integer)");if(H>>>=0,0>H||H+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+H+" (+"+4+") <= "+this.buffer.byteLength)}var S=0;return this.littleEndian?(S=this.view[H+2]<<16,S|=this.view[H+1]<<8,S|=this.view[H]):(S=this.view[H+1]<<8,S|=this.view[H+2],S+=this.view[H]<<16>>>0),S|=0,s&&(this.offset+=3),S},o.readUint32=function(J){var g="undefined"==typeof J;if(g&&(J=this.offset),!this.noAssert){if("number"!=typeof J||0!==J%1)throw TypeError("Illegal offset: "+J+" (not an integer)");if(J>>>=0,0>J||J+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+J+" (+"+4+") <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[J+2]<<16,i|=this.view[J+1]<<8,i|=this.view[J],i+=this.view[J+3]<<24>>>0):(i=this.view[J+1]<<16,i|=this.view[J+2]<<8,i|=this.view[J+3],i+=this.view[J]<<24>>>0),g&&(this.offset+=4),i},o.readFloat32=function(C){var A="undefined"==typeof C;if(A&&(C=this.offset),!this.noAssert){if("number"!=typeof C||0!==C%1)throw TypeError("Illegal offset: "+C+" (not an integer)");if(C>>>=0,0>C||C+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+C+" (+"+4+") <= "+this.buffer.byteLength)}var u=k(this.view,C,this.littleEndian,23,4);return A&&(this.offset+=4),u};var q=function(){var O={};return O.MAX_CODEPOINT=1114111,O.decodeUTF8=function(_,M){for(var r,w,K,X,J=function(x){x=x.slice(0,x.indexOf(null));var s=Error(x.toString());throw s.name="TruncatedError",s.bytes=x,s};null!==(r=_());)if(0===(128&r))M(r);else if(192===(224&r))null===(w=_())&&J([r,w]),M((31&r)<<6|63&w);else if(224===(240&r))(null===(w=_())||null===(K=_()))&&J([r,w,K]),M((15&r)<<12|(63&w)<<6|63&K);else{if(240!==(248&r))throw RangeError("Illegal starting byte: "+r);(null===(w=_())||null===(K=_())||null===(X=_()))&&J([r,w,K,X]),M((7&r)<<18|(63&w)<<12|(63&K)<<6|63&X)}},O.UTF16toUTF8=function(P,z){for(var y,E=null;;){if(null===(y=null!==E?E:P()))break;y>=55296&&57343>=y&&null!==(E=P())&&E>=56320&&57343>=E?(z(1024*(y-55296)+E-56320+65536),E=null):z(y)}null!==E&&z(E)},O.UTF8toUTF16=function(j,_){var N=null;for("number"==typeof j&&(N=j,j=function(){return null});null!==N||null!==(N=j());)65535>=N?_(N):(N-=65536,_((N>>10)+55296),_(N%1024+56320)),N=null},O.decodeUTF8toUTF16=function(s,P){O.decodeUTF8(s,function(J){O.UTF8toUTF16(J,P)})},O.calculateCodePoint=function(l){return 128>l?1:2048>l?2:65536>l?3:4},O.calculateUTF8=function(S){for(var i,g=0;null!==(i=S());)g+=128>i?1:2048>i?2:65536>i?3:4;return g},O.calculateUTF16asUTF8=function(h){var Q=0,F=0;return O.UTF16toUTF8(h,function(p){++Q,F+=128>p?1:2048>p?2:65536>p?3:4}),[Q,F]},O}();o.readString=function(h,Z,A){"number"==typeof Z&&(A=Z,Z=u);var g="undefined"==typeof A;if(g&&(A=this.offset),"undefined"==typeof Z&&(Z=p.METRICS_CHARS),!this.noAssert){if("number"!=typeof h||0!==h%1)throw TypeError("Illegal length: "+h+" (not an integer)");if(h|=0,"number"!=typeof A||0!==A%1)throw TypeError("Illegal offset: "+A+" (not an integer)");if(A>>>=0,0>A||A+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+A+" (+"+0+") <= "+this.buffer.byteLength)}var f,B=0,v=A;if(Z===p.METRICS_CHARS){if(f=E(),q.decodeUTF8(function(){return h>B&&A<this.limit?this.view[A++]:null}.bind(this),function(l){++B,q.UTF8toUTF16(l,f)}),B!==h)throw RangeError("Illegal range: Truncated data, "+B+" == "+h);return g?(this.offset=A,f()):{string:f(),length:A-v}}if(Z===p.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof A||0!==A%1)throw TypeError("Illegal offset: "+A+" (not an integer)");if(A>>>=0,0>A||A+h>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+A+" (+"+h+") <= "+this.buffer.byteLength)}var a=A+h;if(q.decodeUTF8toUTF16(function(){return a>A?this.view[A++]:null}.bind(this),f=E(),this.noAssert),A!==a)throw RangeError("Illegal range: Truncated data, "+A+" == "+a);return g?(this.offset=A,f()):{string:f(),length:A-v}}throw TypeError("Unsupported metrics: "+Z)};var b=function(q){if(q){var V=new p(0);V.buffer=q,V.limit=q.byteLength,V.view=q.byteLength>0?new Uint8Array(q):null;var j=[];return F(j,V),a(j,V),h(j,V),j}},F=function(m,q){q.offset+=19},a=function(b,z){var Y=z.readUint8();1&Y&&(b.center=D(z)),2&Y&&(b.rawS3=D(z))},O=function(B){return[B.readFloat32(),B.readFloat32()]},D=function(o){return[o.readFloat32(),o.readFloat32(),o.readFloat32()]},Z=function(P){var B=P.readUint32();return P.readString(B,p.METRICS_BYTES)},h=function(J,K){for(var L=K.readUint8(),Q=0;L>Q;Q++)J.push(x(K))},x=function(C){var h={},a=C.readUint32(),c=0,m=a&1<<c++,Q=a&1<<c++,f=a&1<<c++,x=a&1<<c++,G=a&1<<c++,z=a&1<<c++,p=a&1<<c++,V=a&1<<c++,w=a&1<<c++,E=a&1<<c++,r=a&1<<c++,S=a&1<<c++;return(m||Q)&&A(h,C,3,"vs","lvs"),f&&A(h,C,2,"uv"),x&&A(h,C,3,"ns"),G&&(h.name=Z(C)),z&&(h.color=D(C)),p&&(h.transparent=!!C.readUint8()),V&&(h.opacity=C.readFloat32()),w&&(h.uvoffset=O(C)),E&&(h.uvScale=D(C)),r&&(h.image=Z(C)),S&&(h.reverseFlip=!!C.readUint8()),h},R=16383,s=function(l){var F=l.readUint16(),t=16384&F,H=32768&F,I=(F&R)/R,k=0;return H&&(k=l.readUint16()),(t?1:-1)*(k+I)},P=function(H){var s=H.readUint32(),k=s&1<<30,N=s&1<<29,x=s&1<<28,F=16383,o=(16383&s>>14)/F,S=(16383&s)/F,v=Math.sqrt(1-o*o-S*S)||0;return[o*(k?1:-1),S*(N?1:-1),v*(x?1:-1)]},A=function(A,$,B,g,Z){var _=$.readUint32();$.readUint8();var T,f,t,E=$.readUint32(),j=$.readUint32(),d=[];if("uv"===g)for(T=0;_>T;T++)f=s($),t=s($),d.push([f,t]);else if("ns"===g)for(T=0;_>T;T++)d.push(P($));else for(var T=0;_>T;T++)d.push(D($));var y;y=256>_?"readUint8":65536>_?"readUint16":16777216>_?"readUint24":"readUint32";var K,H,w;if(E)for(K=A[g]=[],T=0;E>T;T++)H=$[y](),w=d[H],"uv"===g?K.push(w[0],w[1]):K.push(w[0],w[1],w[2]);if(j)for(K=A[Z]=[],T=0;j>T;T++)H=$[y](),w=d[H],K.push(w[0],w[1],w[2])};T.getInternal().addMethod(T,{loadBin:function(m,G){G=G||{};var c=function(k){var C,M=G.finishFunc,P=G.shape3d,W=k?b(k):null;if(W){if(P)C=T.getShape3dModel(P);else{C=[];for(var f in W){var n=W[f];C.rawS3=n.rawS3,C.push(n)}}M&&M(W,C,C.rawS3)}else M&&M(null)};G.responseType="arraybuffer",T.xhrLoad(m,function(y){c(y)},G)},parseBin:function(X){return b(X)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);